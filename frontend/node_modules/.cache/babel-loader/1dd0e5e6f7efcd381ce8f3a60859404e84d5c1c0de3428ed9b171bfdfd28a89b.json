{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\zarba\\\\Desktop\\\\cloud_project\\\\frontend\\\\src\\\\TaskManager.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport TaskList from \"./TaskList\";\nimport TaskForm from \"./TaskForm\";\nimport UserForm from \"./UserForm\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function TaskManager() {\n  _s();\n  const [tasks, setTasks] = useState([]);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  useEffect(() => {\n    fetchTasks();\n  }, []);\n  const fetchTasks = async () => {\n    try {\n      const token = localStorage.getItem(\"token\");\n      const response = await fetch(\"http://localhost:5000/tasks/\", {\n        headers: {\n          \"Authorization\": token\n        }\n      });\n      const data = await response.json();\n      setTasks(data);\n    } catch (error) {\n      console.error(\"Ошибка при загрузке задач:\", error);\n    }\n  };\n  const searchTasks = async () => {\n    try {\n      const token = localStorage.getItem(\"token\");\n      const response = await fetch(`http://localhost:5000/tasks/search?q=${searchQuery}`, {\n        headers: {\n          \"Authorization\": token\n        }\n      });\n      const data = await response.json();\n      setTasks(data);\n    } catch (error) {\n      console.error(\"Ошибка при поиске задач:\", error);\n    }\n  };\n  const onTaskCreated = task => {\n    setTasks([...tasks, task]);\n  };\n  const onTaskDeleted = async taskId => {\n    try {\n      const token = localStorage.getItem(\"token\");\n      const response = await fetch(`http://localhost:5000/tasks/${taskId}`, {\n        method: \"DELETE\",\n        headers: {\n          \"Authorization\": token\n        }\n      });\n      if (response.ok) {\n        setTasks(tasks.filter(task => task.id !== taskId));\n        alert(\"Задача успешно удалена!\");\n      } else {\n        const data = await response.json();\n        alert(`Ошибка при удалении задачи: ${data.error}`);\n      }\n    } catch (error) {\n      console.error(\"Ошибка при удалении задачи:\", error);\n      alert(\"Не удалось удалить задачу.\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"\\u041C\\u0435\\u043D\\u0435\\u0434\\u0436\\u0435\\u0440 \\u0437\\u0430\\u0434\\u0430\\u0447\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(UserForm, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(TaskForm, {\n      onTaskCreated: onTaskCreated\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043A\\u043B\\u044E\\u0447\\u0435\\u0432\\u043E\\u0435 \\u0441\\u043B\\u043E\\u0432\\u043E \\u0434\\u043B\\u044F \\u043F\\u043E\\u0438\\u0441\\u043A\\u0430\",\n        value: searchQuery,\n        onChange: e => setSearchQuery(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: searchTasks,\n        children: \"\\u041F\\u043E\\u0438\\u0441\\u043A\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: fetchTasks,\n        children: \"\\u0421\\u0431\\u0440\\u043E\\u0441\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(TaskList, {\n      tasks: tasks,\n      onTaskDeleted: onTaskDeleted\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 9\n  }, this);\n}\n_s(TaskManager, \"jb/XaRBwT89w4nnTHoZHmZClt4Q=\");\n_c = TaskManager;\nvar _c;\n$RefreshReg$(_c, \"TaskManager\");","map":{"version":3,"names":["React","useState","useEffect","TaskList","TaskForm","UserForm","jsxDEV","_jsxDEV","TaskManager","_s","tasks","setTasks","searchQuery","setSearchQuery","fetchTasks","token","localStorage","getItem","response","fetch","headers","data","json","error","console","searchTasks","onTaskCreated","task","onTaskDeleted","taskId","method","ok","filter","id","alert","children","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","value","onChange","e","target","onClick","_c","$RefreshReg$"],"sources":["C:/Users/zarba/Desktop/cloud_project/frontend/src/TaskManager.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport TaskList from \"./TaskList\";\r\nimport TaskForm from \"./TaskForm\";\r\nimport UserForm from \"./UserForm\";\r\n\r\nexport default function TaskManager() {\r\n    const [tasks, setTasks] = useState([]);\r\n    const [searchQuery, setSearchQuery] = useState(\"\");\r\n\r\n    useEffect(() => {\r\n        fetchTasks();\r\n    }, []);\r\n\r\n    const fetchTasks = async () => {\r\n        try {\r\n            const token = localStorage.getItem(\"token\");\r\n            const response = await fetch(\"http://localhost:5000/tasks/\", {\r\n                headers: { \"Authorization\": token },\r\n            });\r\n            const data = await response.json();\r\n            setTasks(data);\r\n        } catch (error) {\r\n            console.error(\"Ошибка при загрузке задач:\", error);\r\n        }\r\n    };\r\n\r\n    const searchTasks = async () => {\r\n        try {\r\n            const token = localStorage.getItem(\"token\");\r\n            const response = await fetch(`http://localhost:5000/tasks/search?q=${searchQuery}`, {\r\n                headers: { \"Authorization\": token },\r\n            });\r\n            const data = await response.json();\r\n            setTasks(data);\r\n        } catch (error) {\r\n            console.error(\"Ошибка при поиске задач:\", error);\r\n        }\r\n    };\r\n\r\n    const onTaskCreated = (task) => {\r\n        setTasks([...tasks, task]);\r\n    };\r\n\r\n    const onTaskDeleted = async (taskId) => {\r\n        try {\r\n            const token = localStorage.getItem(\"token\");\r\n            const response = await fetch(`http://localhost:5000/tasks/${taskId}`, {\r\n                method: \"DELETE\",\r\n                headers: { \"Authorization\": token },\r\n            });\r\n\r\n            if (response.ok) {\r\n                setTasks(tasks.filter((task) => task.id !== taskId));\r\n                alert(\"Задача успешно удалена!\");\r\n            } else {\r\n                const data = await response.json();\r\n                alert(`Ошибка при удалении задачи: ${data.error}`);\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Ошибка при удалении задачи:\", error);\r\n            alert(\"Не удалось удалить задачу.\");\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <h1>Менеджер задач</h1>\r\n            <UserForm />\r\n            <TaskForm onTaskCreated={onTaskCreated} />\r\n            <div>\r\n                <input\r\n                    type=\"text\"\r\n                    placeholder=\"Введите ключевое слово для поиска\"\r\n                    value={searchQuery}\r\n                    onChange={(e) => setSearchQuery(e.target.value)}\r\n                />\r\n                <button onClick={searchTasks}>Поиск</button>\r\n                <button onClick={fetchTasks}>Сброс</button>\r\n            </div>\r\n            <TaskList tasks={tasks} onTaskDeleted={onTaskDeleted} />\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}